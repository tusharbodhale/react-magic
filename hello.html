<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello World</title>
    <script src="https://unpkg.com/react@latest/dist/react.js"></script>
    <script src="https://unpkg.com/react-dom@latest/dist/react-dom.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
    <script src="https://fb.me/JSXTransformer-0.13.3.js"></script>
    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/
bootstrap.min.css">

<link rel="stylesheet" href="main.css">
  </head>
  <body>
    <div id="root"></div>

    <script type="text/jsx">
      var CodePanel = React.createClass({
        getInitialState: function() {
          return {value: this.props.text};
        },
        localHandleClick: function() {
          this.props.localHandleClick(this.textInput.value);
        },
        render: function() {
          return (
            <div className="col-md-6">
              <div className="row">
                <div className="col-md-9">
                  <h2>Code</h2>
                </div>
                <div className="col-md-3">
                  <button onClick={this.localHandleClick} className="btn run-button">Run</button>
                </div>
              </div>
              <textarea className="form-control code-panel"rows="30"  defaultValue={this.state.value} id="textBox" placeholder="Write your code here"
              ref={(input) => { this.textInput = input; }}
              ></textarea>
            </div>
          )
        }
      });

      var AnimationPanel = React.createClass({
        
        render: function() {
          return (
            <div className="col-md-6">
              <h2>Animation</h2>
              <div className="panel panel-default animate-panel">
                <div className="panel-body">
                  <canvas id="myCanvas" width="500" height="300">
</canvas>
                </div>
              </div>
            </div>
          )
        }
      });

      var AssetBox = React.createClass({
        
        render: function() {
          return (
            <div className="col-md-6">
              <h2>Asset Box</h2>
              <div className="panel panel-default lib-panel">
                <div className="panel-body">
                  <ul className="nav nav-tabs">
                    <li className="active"><a data-toggle="tab" href="#library1">Avatar</a></li>
                    <li><a data-toggle="tab" href="#library2">Sound</a></li>
                    <li><a data-toggle="tab" href="#library3">Video</a></li>
                  </ul>

                  <div className="tab-content">
                    <div id="library1" className="tab-pane fade in active">
                      <h3>Avatars</h3>
                      <div className="avatar-icons">
                        <object type="image/svg+xml" data="assets/images/apple-dark-green.svg">
                          Your browser does not support SVG
                        </object>
                      </div>
                    </div>
                    <div id="library2" className="tab-pane fade">
                      <h3>Sound</h3>
                      <p>Some content in menu 1.</p>
                    </div>
                    <div id="library3" className="tab-pane fade">
                      <h3>Videos</h3>
                      <p>Some content in menu 2.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          )
        }
      });

      var Documentation = React.createClass({
        
        render: function() {
          return (
            <div className="col-md-6">
              <h2>API Reference</h2>
              <div className="panel panel-default lib-panel">
                <div className="panel-body">
                  ..documentation
                </div>
              </div>
            </div>
          )
        }
      });


      /*Main Component*/
      var Main = React.createClass({
        getInitialState: function() {
          return {text: `//code for user
            var myAvatar = avatar("grasshopper", 150);
            myAvatar.appear(100,100);
            myAvatar.moveRight(100).then(function(){
              myAvatar.bounce(50);
            });`};
        },
        handleClick: function(newValue) {
          this.setState({ text: eval(newValue) });
        },
        render: function() {
          return (
            <div className="container">
              <div className="row">
                <CodePanel localHandleClick={this.handleClick} text={this.state.text}/>
                <AnimationPanel text={this.state.text}/>              
              </div>
              <div className="row">
                <AssetBox/>
                <Documentation/>              
              </div>
            </div>
          )
        }
      })

      ReactDOM.render(<Main />, document.getElementById("root"));
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="library.js"></script>
  </body>
</html>
